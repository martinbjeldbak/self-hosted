*.{$SITE_ADDRESS}

tls {$TLS_EMAIL} {
	dns cloudflare {$CLOUDFLARE_API_TOKEN}
}

log {
	output file /data/access.log
}

@dns host {$HOSTNAME_DNS}
handle @dns {
	reverse_proxy adguardhome:3000

	encode gzip
}

@homeassistant host {$HOSTNAME_HOMEASSISTANT}
handle @homeassistant {
	reverse_proxy homeassistant:8123

	encode gzip
}

@plex host {$HOSTNAME_PLEX}
handle @plex {
	reverse_proxy plex:32400

	encode gzip
}

@jackett host {$HOSTNAME_JACKETT}
handle @jackett {
	reverse_proxy gluetun:9117

	encode gzip
}

@radarr host {$HOSTNAME_RADARR}
handle @radarr {
	reverse_proxy radarr:7878

	encode gzip
}

@lidarr host {$HOSTNAME_LIDARR}
handle @lidarr {
	reverse_proxy lidarr:8686

	encode gzip
}

@sonarr host {$HOSTNAME_SONARR}
handle @sonarr {
	reverse_proxy sonarr:8989

	encode gzip
}

@transmission host {$HOSTNAME_TRANSMISSION}
handle @transmission {
	reverse_proxy gluetun:9091

	encode gzip
}

@bazarr host {$HOSTNAME_BAZARR}
handle @bazarr {
	reverse_proxy bazarr:6767

	encode gzip
}

@huginn host {$HOSTNAME_HUGINN}
handle @huginn {
	reverse_proxy huginn:3000

	encode gzip
}

@nas host {$HOSTNAME_NAS}
handle @nas {
	reverse_proxy 192.168.1.250:5000

	encode gzip
}

@tautulli host {$HOSTNAME_TAUTULLI}
handle @tautulli {
	reverse_proxy tautulli:8181

	encode gzip
}

# Fallback for otherwise unhandled domains
handle {
	abort
}
