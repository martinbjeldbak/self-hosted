*.martinbjeldbak.com {
	tls {$TLS_EMAIL} {
		dns cloudflare {$CLOUDFLARE_API_TOKEN}
	}

	log {
		output file /data/access-external.log
	}

	@pterodactyl host panel.martinbjeldbak.com
	handle @pterodactyl {
		reverse_proxy panel:80

		encode gzip
	}
}

*.local.martinbjeldbak.com {
	tls {$TLS_EMAIL} {
		dns cloudflare {$CLOUDFLARE_API_TOKEN}
	}

	log {
		output file /data/access-internal.log
	}

	@nas host nas.local.martinbjeldbak.com
	handle @nas {
		reverse_proxy {$NAS_IP}:5000

		encode gzip
	}

	@dns host dns.local.martinbjeldbak.com
	handle @dns {
		reverse_proxy 192.168.1.1:3000

		encode gzip
	}

	@dns2 host dns2.local.martinbjeldbak.com
	handle @dns2 {
		reverse_proxy adguardhome:3000

		encode gzip
	}

	@radarr host movies.local.martinbjeldbak.com
	handle @radarr {
		reverse_proxy radarr:7878

		encode gzip
	}

	@prowlarr host prowlarr.local.martinbjeldbak.com
	handle @prowlarr {
		reverse_proxy gluetun:9696

		encode gzip
	}

	@lidarr host music.local.martinbjeldbak.com
	handle @lidarr {
		reverse_proxy lidarr:8686

		encode gzip
	}

	@sonarr host tv.local.martinbjeldbak.com
	handle @sonarr {
		reverse_proxy sonarr:8989

		encode gzip
	}

	@transmission host torrents.local.martinbjeldbak.com
	handle @transmission {
		reverse_proxy gluetun:9091

		encode gzip
	}

	@bazarr host subtitles.local.martinbjeldbak.com
	handle @bazarr {
		reverse_proxy bazarr:6767

		encode gzip
	}

	@huginn host h.local.martinbjeldbak.com
	handle @huginn {
		reverse_proxy huginn:3000

		encode gzip
	}

	@tautulli host tautulli.local.martinbjeldbak.com
	handle @tautulli {
		reverse_proxy tautulli:8181

		encode gzip
	}

	@homeassistant host homeassistant.local.martinbjeldbak.com
	handle @homeassistant {
		reverse_proxy homeassistant:8123

		encode gzip
	}

	@dashboard host dash.local.martinbjeldbak.com
	handle @dashboard {
		reverse_proxy heimdall:80

		encode gzip
	}

	@pterodactyl host panel.martinbjeldbak.com
	handle @pterodactyl {
		reverse_proxy panel:80

		encode gzip
	}

	@unifi host unifi.local.martinbjeldbak.com
	handle @unifi {
		reverse_proxy https://192.168.1.1:8443 {
			transport http {
				tls_insecure_skip_verify
			}
		}

		encode gzip
	}

	@router host opnsense.local.martinbjeldbak.com
	handle @router {
		reverse_proxy https://192.168.1.1:443 {
			transport http {
				tls_insecure_skip_verify
			}
		}

		encode gzip
	}

	@pterodactyllocal host panel.local.martinbjeldbak.com
	handle @pterodactyllocal {
		reverse_proxy panel:80

		encode gzip
	}

	@pterodactylmartin host node-martin.local.martinbjeldbak.com
	handle @pterodactylmartin {
		reverse_proxy 192.168.1.14:443

		encode gzip
	}

	@speedtest host speedtest.local.martinbjeldbak.com
	handle @speedtest {
		reverse_proxy speedtest:8445

		encode gzip
	}

	@elmbot host elmbot.local.martinbjeldbak.com
	handle @elmbot {
		reverse_proxy elmbot:54377

		encode gzip
	}

	@esphome host esphome.local.martinbjeldbak.com
	handle @esphome {
		reverse_proxy esphome:6052

		encode gzip
	}

	@epicgames host epicgames.local.martinbjeldbak.com
	handle @epicgames {
		reverse_proxy epicgames-freegames:3000

		encode gzip
	}

	@plex host plex.local.martinbjeldbak.com
	handle @plex {
		reverse_proxy plex:32400

		encode gzip
	}

	# Fallback for otherwise unhandled domains
	handle {
		abort
	}
}
